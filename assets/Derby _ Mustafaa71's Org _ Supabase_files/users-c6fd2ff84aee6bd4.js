(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347],{27559:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/auth/users",function(){return r(23111)}])},16384:function(e,s,r){"use strict";function n(e){var s;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",{displayName:n,display_name:t,fullName:a,full_name:i,familyName:l,family_name:o,givenName:c,given_name:d,surname:u,lastName:h,last_name:x,firstName:m,first_name:j}=null!==(s=e.raw_user_meta_data)&&void 0!==s?s:{},p=l||o||u||h||x,f=c||d||m||j;return n||t||a||i||f&&p&&"".concat(f," ").concat(p)||r}function t(e){var s;let{avatarUrl:r,avatarURL:n,avatar_url:t,profileUrl:a,profileURL:i,profile_url:l,profileImage:o,profile_image:c,profileImageUrl:d,profileImageURL:u,profile_image_url:h}=null!==(s=e.raw_user_meta_data)&&void 0!==s?s:{};return r||n||t||o||c||a||i||l||d||u||h}r.d(s,{E:function(){return t},G:function(){return n}})},38530:function(e,s,r){"use strict";r.d(s,{RT:function(){return i},xY:function(){return o}});var n=r(36492),t=r(31696),a=r(7161);let i=10;async function l(e,s){let{projectRef:r,page:n=1,keywords:a="",filter:l}=e;if(!r)throw Error("Project ref is required");let o={limit:i.toString(),offset:((n-1)*10).toString(),keywords:a};l&&(o.verified=l);let{data:c,error:d}=await (0,t.U2)("/platform/auth/{ref}/users",{params:{path:{ref:r},query:o},signal:s});if(d)throw(0,t.S3)(d);return c}let o=function(e){let{projectRef:s,page:r,keywords:t,filter:i,connectionString:o}=e,{enabled:c=!0,...d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(a.o.users(s,{page:r,keywords:t,filter:i}),e=>{let{signal:n}=e;return l({projectRef:s,page:r,keywords:t,filter:i,connectionString:o},n)},{enabled:c&&void 0!==s,...d})}},23111:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return eU}});var n=r(52322),t=r(85945),a=r(2784),i=r(59491),l=r(99959),o=r(63910),c=r(27570),d=r(53449),u=r(14782),h=r(7161),x=r(38530),m=r(14528),j=r(750),p=r(89682),f=r(11170),v=r(61373),y=r(62284),g=r(49893),w=r(24990),b=r(4678),N=r.n(b),Z=r(34503),C=r(43687),S=r(4191),_=r(13980),E=r.n(_);function P(){return(P=Object.assign||function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var k=(0,a.forwardRef)(function(e,s){var r=e.color,n=e.size,t=void 0===n?24:n,i=function(e,s){if(null==e)return{};var r,n,t=function(e,s){if(null==e)return{};var r,n,t={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],s.indexOf(r)>=0||(t[r]=e[r]);return t}(e,s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}(e,["color","size"]);return a.createElement("svg",P({ref:s,xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:void 0===r?"currentColor":r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},i),a.createElement("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),a.createElement("circle",{cx:"8.5",cy:"7",r:"4"}),a.createElement("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),a.createElement("line",{x1:"23",y1:"11",x2:"17",y2:"11"}))});k.propTypes={color:E().string,size:E().oneOfType([E().string,E().number])},k.displayName="UserPlus";var O=r(2515),z=function(e){return(0,n.jsx)(O.Z,{icon:k,...e})},U=r(99248),A=r(62202),T=r(47852),F=r(62277),L=r(48228),D=r(88354);async function V(e){let{projectRef:s,email:r}=e,n=await (0,D.v_)("".concat(U.T5,"/auth/").concat(s,"/invite"),{email:r});if(n.error)throw n.error;return n}let X=function(){let{onSuccess:e,onError:s,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,t.NL)();return(0,L.D)(e=>V(e),{async onSuccess(s,r,t){let{projectRef:a}=r;await n.invalidateQueries(h.o.users(a)),await (null==e?void 0:e(s,r,t))},async onError(e,r,n){void 0===s?A.ZP.error("Failed to invite user: ".concat(e.message)):s(e,r,n)},...r})};var R=e=>{let{visible:s,setVisible:r}=e,{ref:t}=(0,l.UO)(),{mutateAsync:a,isLoading:o}=X(),c=(0,m.Xo)(i.KA.AUTH_EXECUTE,"invite_user"),d=async e=>{if(!t)return console.error("Project ref is required");await a({projectRef:t,email:e.email}),A.ZP.success("Sent invite email to ".concat(e.email)),r(!1)};return(0,n.jsx)("div",{children:(0,n.jsx)(T.C,{closable:!0,hideFooter:!0,size:"small",visible:s,header:"Invite a new user",onCancel:()=>r(!s),children:(0,n.jsx)(F.Z,{validateOnBlur:!1,initialValues:{email:""},validate:e=>{let s={};return 0===e.email.length?s.email="Please enter a valid email":/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e.email)||(s.email="".concat(e.email," is an invalid email")),s},onSubmit:d,children:()=>(0,n.jsxs)("div",{className:"space-y-6 py-4",children:[(0,n.jsx)(T.C.Content,{children:(0,n.jsx)(j.Z,{id:"email",className:"w-full",label:"User email",icon:(0,n.jsx)(S.Z,{}),type:"email",name:"email",placeholder:"User email"})}),(0,n.jsx)(T.C.Content,{children:(0,n.jsx)(f.z,{block:!0,size:"small",htmlType:"submit",loading:o,disabled:!c||o,children:"Invite user"})})]})})},"invite-user-modal")})},Y=r(55446),M=r(89689),q=r(12934);async function H(e){let{protocol:s,endpoint:r,serviceApiKey:n,user:t}=e,a=await (0,D.v_)("".concat(s,"://").concat(r,"/auth/v1/admin/users"),{email:t.email,password:t.password,email_confirm:t.autoConfirmUser},{headers:{apikey:n,Authorization:"Bearer ".concat(n)}});if(a.error)throw a.error;return a}let K=function(){let{onSuccess:e,onError:s,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,t.NL)();return(0,L.D)(e=>H(e),{async onSuccess(s,r,t){let{projectRef:a}=r;await n.invalidateQueries(h.o.users(a)),await (null==e?void 0:e(s,r,t))},async onError(e,r,n){void 0===s?A.ZP.error("Failed to create user: ".concat(e.message)):s(e,r,n)},...r})};var I=r(53535),Q=e=>{let{visible:s,setVisible:r}=e,{ref:t}=(0,l.UO)(),{data:a,isLoading:o,isSuccess:c}=(0,I.q)({projectRef:t},{enabled:s}),d=(0,m.Xo)(i.KA.AUTH_EXECUTE,"create_user"),{mutate:u,isLoading:h}=K({async onSuccess(e){A.ZP.success("Successfully created user: ".concat(e.email)),r(!1)}}),x=async e=>{if(!c)return A.ZP.error("Failed to create user: Error loading project config");let{protocol:s,endpoint:r,serviceApiKey:n}=a.autoApiService;u({projectRef:t,endpoint:r,protocol:s,serviceApiKey:n,user:e})};return(0,n.jsx)(T.C,{closable:!0,hideFooter:!0,size:"small",visible:s,header:"Create a new user",onCancel:()=>r(!s),loading:!0,children:(0,n.jsx)(F.Z,{validateOnBlur:!1,initialValues:{email:"",password:"",autoConfirmUser:!0},validate:e=>{var s;let r={};return 0===e.email.length?r.email="Please enter a valid email":/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e.email)||(r.email="".concat(e.email," is an invalid email")),(null===(s=e.password)||void 0===s?void 0:s.trim())||(r.password="Please enter a password"),r},onSubmit:x,children:()=>(0,n.jsx)(Y.Z,{active:o,children:(0,n.jsxs)("div",{className:"space-y-6 py-4",children:[(0,n.jsx)(T.C.Content,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(j.Z,{id:"email",autoComplete:"off",label:"User Email",icon:(0,n.jsx)(S.Z,{}),type:"email",name:"email",placeholder:"user@example.com",disabled:h||o}),(0,n.jsx)(j.Z,{id:"password",name:"password",type:"password",label:"User Password",placeholder:"••••••••",icon:(0,n.jsx)(M.Z,{}),disabled:h||o,autoComplete:"new-password"}),(0,n.jsx)(q.Z,{value:"true",id:"autoConfirmUser",name:"autoConfirmUser",label:"Auto Confirm User?",size:"medium",description:"Creates the user without sending them a confirmation email",defaultChecked:!0,disabled:h||o})]})}),(0,n.jsx)(T.C.Content,{children:(0,n.jsx)(f.z,{block:!0,size:"small",htmlType:"submit",loading:h,disabled:!d||h||o,children:"Create user"})})]})})})},"create-user-modal")},W=e=>{let{projectKpsVersion:s}=e,r=!U.Qy||N().gte(N().coerce(null!=s?s:"kps-v2.5.4"),N().coerce("kps-v2.5.3")),t=(0,m.Xo)(i.KA.AUTH_EXECUTE,"invite_user"),l=(0,m.Xo)(i.KA.AUTH_EXECUTE,"create_user"),[o,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Z.h_,{children:[(0,n.jsx)(Z.$F,{asChild:!0,children:(0,n.jsx)(f.z,{type:"primary",iconRight:(0,n.jsx)(C.Z,{strokeWidth:1.5}),children:"Add user"})}),(0,n.jsxs)(Z.AW,{side:"bottom",align:"end",children:[r&&(0,n.jsxs)(w.fC,{delayDuration:0,children:[(0,n.jsx)(w.xz,{className:"w-full",children:(0,n.jsxs)(Z.Xi,{className:"space-x-2",disabled:!t,onClick:()=>c(!0),children:[(0,n.jsx)(S.Z,{size:"small"}),(0,n.jsx)("p",{children:"Send invitation"})]})}),!t&&(0,n.jsx)(w.h_,{children:(0,n.jsxs)(w.VY,{side:"bottom",children:[(0,n.jsx)(w.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to invite users"})})]})})]}),(0,n.jsxs)(w.fC,{delayDuration:0,children:[(0,n.jsx)(w.xz,{className:"w-full text-left",children:(0,n.jsxs)(Z.Xi,{className:"space-x-2",disabled:!l,onClick:()=>u(!0),children:[(0,n.jsx)(z,{size:"small"}),(0,n.jsx)("p",{children:"Create new user"})]})}),!l&&(0,n.jsx)(w.h_,{children:(0,n.jsxs)(w.VY,{side:"bottom",children:[(0,n.jsx)(w.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to create users"})})]})})]})]})]}),r&&(0,n.jsx)(R,{visible:o,setVisible:c}),(0,n.jsx)(Q,{visible:d,setVisible:u})]})},$=r(15735),B=r(56006),G=r(39459),J=r(28879),ee=r.n(J),es=r(81076),er=r(62614);async function en(e){let{projectRef:s,userId:r}=e,n=await (0,D.$v)("".concat(U.T5,"/auth/").concat(s,"/users/").concat(r,"/factors"));if(n.error)throw n.error;return n}let et=function(){let{onSuccess:e,onError:s,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,L.D)(e=>en(e),{async onSuccess(s,r,n){await (null==e?void 0:e(s,r,n))},async onError(e,r,n){void 0===s?A.ZP.error("Failed to delete user MFA factors: ".concat(e.message)):s(e,r,n)},...r})};async function ea(e){let{projectRef:s,user:r}=e,n=await (0,D.$v)("".concat(U.T5,"/auth/").concat(s,"/users"),r);if(n.error)throw n.error;return n}let ei=function(){let{onSuccess:e,onError:s,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,t.NL)();return(0,L.D)(e=>ea(e),{async onSuccess(s,r,t){let{projectRef:a}=r;await n.invalidateQueries(h.o.users(a)),await (null==e?void 0:e(s,r,t))},async onError(e,r,n){void 0===s?A.ZP.error("Failed to delete user: ".concat(e.message)):s(e,r,n)},...r})};async function el(e){let{projectRef:s,user:r}=e,n=await (0,D.v_)("".concat(U.T5,"/auth/").concat(s,"/recover"),r);if(n.error)throw n.error;return n}let eo=function(){let{onSuccess:e,onError:s,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,L.D)(e=>el(e),{async onSuccess(s,r,n){await (null==e?void 0:e(s,r,n))},async onError(e,r,n){void 0===s?A.ZP.error("Failed to reset user password: ".concat(e.message)):s(e,r,n)},...r})};async function ec(e){let{projectRef:s,user:r}=e,n=await (0,D.v_)("".concat(U.T5,"/auth/").concat(s,"/magiclink"),r);if(n.error)throw n.error;return n}let ed=function(){let{onSuccess:e,onError:s,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,L.D)(e=>ec(e),{async onSuccess(s,r,n){await (null==e?void 0:e(s,r,n))},async onError(e,r,n){void 0===s?A.ZP.error("Failed to send magic link: ".concat(e.message)):s(e,r,n)},...r})};async function eu(e){let{projectRef:s,user:r}=e,n=await (0,D.v_)("".concat(U.T5,"/auth/").concat(s,"/otp"),r);if(n.error)throw n.error;return n}let eh=function(){let{onSuccess:e,onError:s,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,L.D)(e=>eu(e),{async onSuccess(s,r,n){await (null==e?void 0:e(s,r,n))},async onError(e,r,n){void 0===s?A.ZP.error("Failed to send magic link: ".concat(e.message)):s(e,r,n)},...r})};var ex=r(82667),em=r(23056),ej=r(49541),ep=r(24203),ef=r(62134),ev=r(54383),ey=r(74138),eg=e=>{let{user:s,canRemoveUser:r,canRemoveMFAFactors:t,setSelectedUser:i,setUserSidePanelOpen:o}=e,{ref:c}=(0,l.UO)(),{mutate:d,isLoading:u}=eo({onSuccess:()=>{A.ZP.success("Sent password recovery to ".concat(s.email))}}),{mutate:h,isLoading:x}=ed({onSuccess:()=>{A.ZP.success("Sent magic link to ".concat(s.email))}}),{mutate:m,isLoading:j}=eh({onSuccess:()=>{A.ZP.success("Sent OTP to ".concat(s.phone))}}),{mutateAsync:p,isLoading:v}=ei(),{mutateAsync:y,isLoading:g}=et(),b=async()=>{if(!c)return console.error("Project ref is required");d({projectRef:c,user:s})};async function N(){if(!c)return console.error("Project ref is required");h({projectRef:c,user:s})}async function C(){if(!c)return console.error("Project ref is required");m({projectRef:c,user:s})}let[_,E]=(0,a.useState)(!1);async function P(){if(await (0,ex.Vs)(200),!c)return console.error("Project ref is required");try{await p({projectRef:c,user:s}),A.ZP.success("Successfully deleted ".concat(s.email)),E(!1)}catch(s){var e;A.ZP.error(null!==(e=null==s?void 0:s.message)&&void 0!==e?e:"Something went wrong while trying to delete user")}}let[k,O]=(0,a.useState)(!1);async function z(){if(await (0,ex.Vs)(200),!c)return console.error("Project ref is required");if(!s.id)return console.error("User id is required");try{await y({projectRef:c,userId:s.id}),A.ZP.success("Successfully deleted the user's factors"),O(!1)}catch(s){var e;A.ZP.error(null!==(e=null==s?void 0:s.message)&&void 0!==e?e:"Something went wrong while trying to delete user's factors")}finally{}}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Z.h_,{children:[(0,n.jsx)(Z.$F,{asChild:!0,children:(0,n.jsx)(f.z,{type:"text",loading:u||x||j||v||g,className:"hover:border-muted flex",children:(0,n.jsx)(em.Z,{})})}),(0,n.jsx)(Z.AW,{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Z.Xi,{className:"space-x-2",onClick:()=>{i(s),o(!0)},children:[(0,n.jsx)(ej.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"View user info"})]}),(0,n.jsx)(Z.VD,{}),null!==s.email?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Z.Xi,{className:"space-x-2",onClick:b,children:[(0,n.jsx)(S.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Send password recovery"})]}),(0,n.jsxs)(Z.Xi,{className:"space-x-2",onClick:N,children:[(0,n.jsx)(S.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Send magic link"})]})]}):null,null!==s.phone?(0,n.jsxs)(Z.Xi,{className:"space-x-2",onClick:C,children:[(0,n.jsx)(S.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Send OTP"})]}):null,(0,n.jsx)(Z.VD,{}),(0,n.jsxs)(w.fC,{delayDuration:0,children:[(0,n.jsx)(w.xz,{asChild:!0,children:(0,n.jsxs)(Z.Xi,{onClick:()=>{O(!0)},disabled:!t,className:"space-x-2",children:[(0,n.jsx)(ep.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Remove MFA factors"})]})}),!t&&(0,n.jsx)(w.h_,{children:(0,n.jsxs)(w.VY,{side:"bottom",children:[(0,n.jsx)(w.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to remove a user's authentication factors."})})]})})]}),(0,n.jsxs)(w.fC,{delayDuration:0,children:[(0,n.jsx)(w.xz,{asChild:!0,children:(0,n.jsxs)(Z.Xi,{onClick:()=>{E(!0)},disabled:!r,className:"space-x-2",children:[(0,n.jsx)(ef.Z,{size:"tiny"}),(0,n.jsx)("p",{children:"Delete user"})]})}),!r&&(0,n.jsx)(w.h_,{children:(0,n.jsxs)(w.VY,{side:"bottom",children:[(0,n.jsx)(w.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:(0,ev.cn)(["rounded bg-alternative py-1 px-2 leading-none shadow","border border-background"]),children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to delete users"})})]})})]})]})})]}),(0,n.jsx)(ey.Z,{visible:_,title:"Confirm to delete",confirmLabel:"Delete",onCancel:()=>E(!1),onConfirm:()=>{P()},children:(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["This is permanent! Are you sure you want to delete user ",s.email,"?"]})}),(0,n.jsx)(ey.Z,{visible:k,title:"Confirm to delete",confirmLabel:"Delete",onCancel:()=>O(!1),onConfirm:()=>{z()},children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"This is permanent! Are you sure you want to delete the user's MFA factors?"})})]})},ew=r(16384),eb=e=>{var s;let{user:r,canRemoveUser:t,canRemoveMFAFactors:a,setSelectedUser:i,setUserSidePanelOpen:l}=e,o=r.email_confirmed_at||r.phone_confirmed_at,c=ee()(r.created_at),d=ee()(r.last_sign_in_at);return(0,n.jsxs)($.Z.tr,{className:"relative",children:[(0,n.jsx)($.Z.td,{className:"whitespace-nowrap",children:(0,n.jsx)("span",{className:"text-foreground",children:(0,ew.G)(r)})}),(0,n.jsx)($.Z.td,{className:"whitespace-nowrap",children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("span",{className:"text-sm text-foreground",children:r.email?r.email:"-"})})}),(0,n.jsx)($.Z.td,{className:"whitespace-nowrap",children:(0,n.jsx)("span",{className:"text-foreground",children:r.phone?r.phone:"-"})}),(0,n.jsx)($.Z.td,{className:"table-cell",children:(0,n.jsx)("span",{className:"capitalize text-foreground",children:r.is_anonymous?"Anonymous":null==r?void 0:null===(s=r.raw_app_meta_data)||void 0===s?void 0:s.provider})}),(0,n.jsx)($.Z.td,{className:"table-cell",children:(0,n.jsx)("span",{className:"text-foreground",children:null==c?void 0:c.format("DD MMM, YYYY HH:mm")})}),(0,n.jsx)($.Z.td,{className:"table-cell",children:(null==r?void 0:r.last_sign_in_at)?null==d?void 0:d.format("DD MMM, YYYY HH:mm"):o?"Never":(0,n.jsx)(es.C,{variant:"warning",children:"Waiting for verification.."})}),(0,n.jsx)($.Z.td,{className:"table-cell",children:(0,n.jsxs)("div",{className:"flex max-w-[72px] items-baseline",children:[(0,n.jsx)(er.Z,{className:"font-xs bash",children:r.id}),(0,n.jsx)("div",{children:"..."})]})}),(0,n.jsx)($.Z.td,{className:"table-cell",children:(0,n.jsx)(eg,{user:r,canRemoveUser:t,canRemoveMFAFactors:a,setSelectedUser:i,setUserSidePanelOpen:l})})]},r.id)},eN=r(41679),eZ=r(82),eC=()=>(0,n.jsxs)($.Z.tr,{className:"relative",children:[(0,n.jsx)($.Z.td,{className:"whitespace-nowrap",children:(0,n.jsx)(eN.Z,{className:"h-[20px] py-0 w-8"})}),(0,n.jsx)($.Z.td,{className:"whitespace-nowrap",children:(0,n.jsx)(eN.Z,{className:"h-[20px] py-0 w-36"})}),(0,n.jsx)($.Z.td,{className:"whitespace-nowrap",children:(0,n.jsx)(eN.Z,{className:"h-[20px] py-0 w-8"})}),(0,n.jsx)($.Z.td,{className:"table-cell",children:(0,n.jsx)(eN.Z,{className:"h-[20px] py-0 w-10"})}),(0,n.jsx)($.Z.td,{className:"table-cell",children:(0,n.jsx)(eN.Z,{className:"h-[20px] py-0 w-32"})}),(0,n.jsx)($.Z.td,{className:"table-cell",children:(0,n.jsx)(eN.Z,{className:"h-[20px] py-0 w-8"})}),(0,n.jsx)($.Z.td,{className:"table-cell",children:(0,n.jsx)(eN.Z,{className:"h-[20px] py-0 w-20"})}),(0,n.jsx)($.Z.td,{className:"table-cell",children:(0,n.jsx)(f.z,{type:"text",disabled:!0,className:"hover:border-muted flex",children:(0,n.jsx)(eZ.Z,{})})})]}),eS=e=>{let{total:s,page:r,setPage:t,isFetchingNextPage:a}=e,i=x.RT*(r-1)+1,l=i>s?s:i,o=x.RT*r,c=o>s?s:o,d=c<s;return(0,n.jsxs)("nav",{className:"flex items-center justify-between overflow-hidden","aria-label":"Pagination",children:[(0,n.jsx)("div",{className:"hidden sm:block",children:(0,n.jsxs)("p",{className:"text-xs text-foreground-lighter",children:["Showing",(0,n.jsx)("span",{className:"px-1 font-medium text-foreground-light",children:l}),"to",(0,n.jsx)("span",{className:"px-1 font-medium text-foreground-light",children:c}),"of",(0,n.jsx)("span",{className:"px-1 font-medium text-foreground-light",children:s}),"results"]})}),(0,n.jsxs)("div",{className:"flex flex-1 justify-between sm:justify-end",children:[r>1&&!(a&&2===r)&&(0,n.jsx)(f.z,{type:"default",onClick:()=>t(r-1),disabled:a,children:"Previous"}),(d||a)&&(0,n.jsx)(f.z,{type:"default",className:"ml-3",onClick:()=>t(r+1),disabled:a,loading:a,children:"Next"})]})]})},e_=r(49251),eE=e=>{let{selectedUser:s,userSidePanelOpen:r,setUserSidePanelOpen:t}=e;return(0,n.jsx)(e_.ZP,{size:"large",header:"View user info",visible:r,onCancel:()=>t(!1),cancelText:"Close",children:(0,n.jsx)(e_.ZP.Content,{className:"space-y-10 py-6",children:(0,n.jsx)(er.Z,{className:"javascript",children:JSON.stringify(s,null,2)})})})},eP=e=>{let{page:s,setPage:r,keywords:t,total:l,users:o,isLoading:c,isSuccess:d,isFetchingNextPage:u,error:h}=e,[x,j]=(0,a.useState)(void 0),[p,f]=(0,a.useState)(!1),v=(0,m.Xo)(i.KA.TENANT_SQL_DELETE,"auth.users"),y=(0,m.Xo)(i.KA.TENANT_SQL_DELETE,"auth.mfa_factors");return(0,n.jsx)($.Z,{head:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)($.Z.th,{children:"Display Name"}),(0,n.jsx)($.Z.th,{children:"Email"}),(0,n.jsx)($.Z.th,{children:"Phone"}),(0,n.jsx)($.Z.th,{className:"table-cell",children:"Provider"}),(0,n.jsx)($.Z.th,{className:"table-cell",children:"Created"}),(0,n.jsx)($.Z.th,{className:"table-cell",children:"Last Sign In"}),(0,n.jsx)($.Z.th,{className:"table-cell",children:"User UID"}),(0,n.jsx)($.Z.th,{})]}),body:(0,n.jsxs)(n.Fragment,{children:[c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eC,{}),(0,n.jsx)(eC,{}),(0,n.jsx)(eC,{}),(0,n.jsx)(eC,{})]}),h&&(0,n.jsx)(B.Z,{error:h,subject:"Failed to retrieve users"}),d&&0===o.length&&(0,n.jsx)($.Z.tr,{children:(0,n.jsx)($.Z.td,{colSpan:8,className:"h-14 whitespace-nowrap border-t p-4 text-sm leading-5 text-gray-300",children:(0,n.jsxs)("div",{className:"flex items-center space-x-3 opacity-75",children:[(0,n.jsx)(G.Z,{size:16,strokeWidth:2}),(0,n.jsx)("p",{className:"text-foreground-light",children:t?'No users matched the search query "'.concat(t,'"'):"No users in your project"})]})})}),d&&o.length>0&&o.map(e=>(0,n.jsx)(eb,{user:e,canRemoveUser:v,canRemoveMFAFactors:y,setSelectedUser:j,setUserSidePanelOpen:f},e.id)),(0,n.jsx)($.Z.tr,{children:(0,n.jsx)($.Z.td,{colSpan:8,children:(0,n.jsx)(eS,{total:l,page:s,setPage:r,isFetchingNextPage:u})})}),(0,n.jsx)(eE,{selectedUser:x,userSidePanelOpen:p,setUserSidePanelOpen:f})]})})},ek=()=>{var e,s;let r=(0,t.NL)(),{project:w}=(0,c.d2)(),{ref:b}=(0,l.UO)(),N=(0,o.cg)(),[Z,C]=(0,a.useState)(1),[S,_]=(0,a.useState)(""),[E,P]=(0,a.useState)(""),[k,O]=(0,a.useState)(),z=(0,m.Xo)(i.KA.TENANT_SQL_SELECT,"auth.users"),U=(0,m.N4)(),{data:A,isLoading:T,isSuccess:F,refetch:L,isRefetching:D,error:V,isPreviousData:X}=(0,x.xY)({projectRef:b,page:Z,keywords:E,filter:k,connectionString:null==w?void 0:w.connectionString},{keepPreviousData:!0,onSuccess(e){e.users.length<=0&&e.total>0&&(r.removeQueries(h.o.users(b,{page:Z,keywords:E,filter:k})),C(e=>e-1))}});return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"justify-between px-6 pt-6 pb-2 md:flex",children:[(0,n.jsxs)("div",{className:"relative flex space-x-4",children:[(0,n.jsx)(j.Z,{size:"small",value:S,onChange:e=>_(e.target.value),onKeyDown:e=>{13==e.keyCode&&P(S)},className:"min-w-[275px]",name:"email",id:"email",placeholder:"Search by email or phone number",icon:(0,n.jsx)(p.Z,{size:"tiny"}),actions:[S&&(0,n.jsx)(f.z,{size:"tiny",type:"text",icon:(0,n.jsx)(v.Z,{size:"tiny"}),onClick:()=>void(_(""),P(""),O(void 0))})]}),(0,n.jsxs)(y.Z,{size:"small",value:k,onChange:function(e){O(e)},name:"verified",id:"verified",className:"w-[200px]",children:[(0,n.jsx)(y.Z.Option,{label:"All Users",value:"",children:"All Users"}),(0,n.jsx)(y.Z.Option,{label:"Verified Users",value:"verified",children:"Verified Users"}),(0,n.jsx)(y.Z.Option,{label:"Un-Verified Users",value:"unverified",children:"Un-Verified Users"}),(0,n.jsx)(y.Z.Option,{label:"Anonymous Users",value:"anonymous",children:"Anonymous Users"})]})]}),(0,n.jsxs)("div",{className:"mt-4 flex items-center gap-2 md:mt-0",children:[N&&(0,n.jsx)(d.Z,{section:["user-management"]}),(0,n.jsx)(f.z,{size:"tiny",icon:(0,n.jsx)(g.Z,{}),type:"default",loading:D&&!X,onClick:()=>L(),children:"Reload"}),(0,n.jsx)(W,{projectKpsVersion:null==w?void 0:w.kpsVersion})]})]}),(0,n.jsx)("section",{className:"thin-scrollbars mt-4 overflow-visible px-6",children:(0,n.jsx)("div",{className:"section-block--body relative overflow-x-auto rounded",children:(0,n.jsx)("div",{className:"inline-block min-w-full align-middle",children:U&&!z?(0,n.jsx)("div",{className:"mt-8",children:(0,n.jsx)(u.Z,{isFullPage:!0,resourceText:"access your project's users"})}):(0,n.jsx)(eP,{page:Z,setPage:C,keywords:E,total:null!==(e=null==A?void 0:A.total)&&void 0!==e?e:0,users:null!==(s=null==A?void 0:A.users)&&void 0!==s?s:[],isLoading:T,isSuccess:F,isFetchingNextPage:X,error:V})})})})]})},eO=r(92099);let ez=()=>(0,n.jsx)(ek,{});ez.getLayout=e=>(0,n.jsx)(eO.g1,{title:"Auth",children:e});var eU=ez},82:function(e,s,r){"use strict";var n=r(52322);r(2784);var t=r(13667),a=r(2515);s.Z=function(e){return(0,n.jsx)(a.Z,{icon:t.Z,...e})}},24203:function(e,s,r){"use strict";r.d(s,{Z:function(){return d}});var n=r(52322),t=r(2784),a=r(13980),i=r.n(a);function l(){return(l=Object.assign||function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=(0,t.forwardRef)(function(e,s){var r=e.color,n=e.size,a=void 0===n?24:n,i=function(e,s){if(null==e)return{};var r,n,t=function(e,s){if(null==e)return{};var r,n,t={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],s.indexOf(r)>=0||(t[r]=e[r]);return t}(e,s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}(e,["color","size"]);return t.createElement("svg",l({ref:s,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:void 0===r?"currentColor":r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},i),t.createElement("path",{d:"M19.69 14a6.9 6.9 0 0 0 .31-2V5l-8-3-3.16 1.18"}),t.createElement("path",{d:"M4.73 4.73L4 5v7c0 6 8 10 8 10a20.29 20.29 0 0 0 5.62-4.38"}),t.createElement("line",{x1:"1",y1:"1",x2:"23",y2:"23"}))});o.propTypes={color:i().string,size:i().oneOfType([i().string,i().number])},o.displayName="ShieldOff";var c=r(2515),d=function(e){return(0,n.jsx)(c.Z,{icon:o,...e})}},13667:function(e,s,r){"use strict";var n=r(2784),t=r(13980),a=r.n(t);function i(){return(i=Object.assign||function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var l=(0,n.forwardRef)(function(e,s){var r=e.color,t=e.size,a=void 0===t?24:t,l=function(e,s){if(null==e)return{};var r,n,t=function(e,s){if(null==e)return{};var r,n,t={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],s.indexOf(r)>=0||(t[r]=e[r]);return t}(e,s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}(e,["color","size"]);return n.createElement("svg",i({ref:s,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:void 0===r?"currentColor":r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),n.createElement("circle",{cx:"12",cy:"12",r:"1"}),n.createElement("circle",{cx:"19",cy:"12",r:"1"}),n.createElement("circle",{cx:"5",cy:"12",r:"1"}))});l.propTypes={color:a().string,size:a().oneOfType([a().string,a().number])},l.displayName="MoreHorizontal",s.Z=l}},function(e){e.O(0,[667,9678,8183,8421,3844,9785,7263,2745,9595,4582,5573,7932,9806,1682,7309,9229,3832,626,7774,6541,8020,6723,9774,2888,179],function(){return e(e.s=27559)}),_N_E=e.O()}]);