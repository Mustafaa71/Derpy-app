(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5117],{71372:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/auth/url-configuration",function(){return r(80593)}])},35648:function(e,t,r){"use strict";r.d(t,{y:function(){return s}});let s=RegExp("(".concat(/^((ftp|http|https):\/\/)?(www.)?(?!.*(ftp|http|https|www.))[a-zA-Z0-9_*-]+(\.[a-zA-Z0-9_*-]+)+((\/)[\w#]+)*(\/\w+\?[a-zA-Z0-9_]+=\w+(&[a-zA-Z0-9_]+=\w+)*)+(?:\.[a-z]+)*(?::\d+)?(?![^<]*(?:<\/\w+>|\/?>))(.*)?\/?(.)*?$/gm.source,")|(").concat(/^(?:^|\s)((https?:\/\/)?(?:localhost|[\w-]+(?:\.[\w-]+)+)(:\d+)?(\/\S*)?)/i.source,")|(").concat(/^[a-z0-9-]+([.][a-z0-9]+)*:\/(\/[-a-z0-9._~!$&'()*+,;=:@%]+)+(?:\.[a-z]+)*(?::\d+)?(?![^<]*(?:<\/\w+>|\/?>))(.*)?\/?(.)*?$/i.source,")|(").concat(/chrome-extension:\/\/([a-zA-Z]*)/gm.source,")|(").concat(/^([a-zA-Z][a-zA-Z0-9+.-]*):(?:\/{1,3})?([a-zA-Z0-9_.-]*)$/.source,")"),"i")},92138:function(e,t,r){"use strict";r.d(t,{p:function(){return i}});var s=r(52322);let i=()=>(0,s.jsxs)("div",{className:"flex w-full flex-row items-center justify-between gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,s.jsx)("div",{className:"shimmering-loader h-6 w-6 rounded-full"}),(0,s.jsx)("div",{className:"shimmering-loader h-2 w-32 rounded"})]}),(0,s.jsx)("div",{className:"shimmering-loader h-6 w-20 rounded"})]})},7999:function(e,t,r){"use strict";var s=r(52322),i=r(5632),n=r(62029);t.Z=e=>{let{message:t}=e,r=(0,i.useRouter)(),{ref:a}=r.query;return(0,s.jsx)(n.Z,{title:"No public tables found",ctaButtonLabel:"Create a new table",onClickCta:()=>{r.push("/project/".concat(a,"/editor"))},children:(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:t})})}},95569:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var s=r(85945),i=r(48228),n=r(62202),a=r(31696),o=r(7161);async function l(e){let{projectRef:t,config:r}=e,{data:s,error:i}=await (0,a.r$)("/platform/auth/{ref}/config",{params:{path:{ref:t}},body:{...r}});if(i)throw i;return s}let c=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,s.NL)();return(0,i.D)(e=>l(e),{async onSuccess(t,r,s){let{projectRef:i}=r;await a.invalidateQueries(o.o.authConfig(i)),await (null==e?void 0:e(t,r,s))},async onError(e,r,s){void 0===t?n.ZP.error("Failed to update auth configuration: ".concat(e.message)):t(e,r,s)},...r})}},80593:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return P}});var s=r(52322),i=r(59491),n=r(24990),a=r(99959),o=r(39097),l=r.n(o),c=r(2784),d=r(62202),u=r(11170),h=r(32830),x=r(95492),m=r(39459),f=r(47852),p=r(62277),j=r(750),g=r(48601),v=r(14698),b=r(92138),w=r(33635),y=r(95569),L=r(14528),N=r(35648),R=r(34291),_=r.n(R),U=r(15434),S=r(62134);let Z=e=>{let{title:t,description:r}=e;return(0,s.jsxs)("div",{className:" flex flex-col items-center justify-center  gap-6 text-center ",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("div",{className:"relative flex h-4 w-32 items-center rounded border border-dashed px-2"}),(0,s.jsx)("div",{className:"relative flex h-4 w-32 items-center rounded border border-dashed px-2",children:(0,s.jsx)("div",{className:"absolute right-1 -bottom-4",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1 px-5",children:[(0,s.jsx)("h3",{className:"text-foreground text-sm",children:t}),(0,s.jsx)("p",{className:"text-foreground-lighter text-sm",children:r})]})]})};r(7999);var z=e=>{let{children:t}=e;return(0,s.jsx)("div",{className:" bg-surface-100 border-default text-foreground flex items-center  justify-between gap-2 border px-6  py-4 text-sm first:rounded-tr first:rounded-tl last:rounded-br last:rounded-bl ",children:t})},k=e=>{let{URI_ALLOW_LIST_ARRAY:t,canUpdate:r,onSelectUrlToDelete:i=_()}=e;return(0,s.jsx)("div",{className:"-space-y-px",children:t.length>0?t.map(e=>(0,s.jsxs)(z,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 font-mono",children:[(0,s.jsx)("span",{className:"text-foreground-lighter",children:(0,s.jsx)(U.Z,{strokeWidth:2,size:14})}),(0,s.jsx)("span",{className:"text-sm",children:e})]}),r&&(0,s.jsx)(u.z,{type:"default",icon:(0,s.jsx)(S.Z,{}),onClick:()=>i(e),children:"Remove"})]},e)):(0,s.jsx)("div",{className:"flex items-center border-overlay bg-studio text-foreground justify-center gap-2 rounded border px-6 py-8 text-sm",children:(0,s.jsx)(Z,{title:"No Redirect URLs",description:"Auth providers may need a URL to redirect back to"})})})},A=()=>{let{ref:e}=(0,a.UO)(),{data:t,error:r,isLoading:o,isError:R,isSuccess:_}=(0,w.$E)({projectRef:e}),{mutate:U,isLoading:S}=(0,y._)(),Z=(0,c.useMemo)(()=>(null==t?void 0:t.URI_ALLOW_LIST)?t.URI_ALLOW_LIST.split(/\s*[,]+\s*/).filter(e=>e):[],[null==t?void 0:t.URI_ALLOW_LIST]),[A,E]=(0,c.useState)(!1),[O,C]=(0,c.useState)(),T=(0,L.Xo)(i.KA.UPDATE,"custom_config_gotrue"),I=(0,g.object)({url:(0,g.string)().matches(N.y,"URL is not valid").required()}),P=async t=>{if(!t.url)return;Z.push(t.url.replace(/,\s*$/,""));let r=Z.toString();if(r.length>2048)return d.ZP.error("Too many redirect URLs, please remove some or try to use wildcards");U({projectRef:e,config:{URI_ALLOW_LIST:r}},{onError:e=>{d.ZP.error("Failed to update URL: ".concat(null==e?void 0:e.message))},onSuccess:()=>{E(!1),d.ZP.success("Successfully added URL")}})},W=async t=>{t&&U({projectRef:e,config:{URI_ALLOW_LIST:Z.filter(e=>e!==t).toString()}},{onError:e=>{d.ZP.error("Failed to remove URL: ".concat(null==e?void 0:e.message))},onSuccess:()=>{C(void 0),d.ZP.success("Successfully removed URL")}})};return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(v.ph,{title:"Redirect URLs",description:"URLs that auth providers are permitted to redirect to post authentication. Wildcards are allowed, for example, https://*.domain.com"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-6 ml-12",children:[(0,s.jsx)(u.z,{asChild:!0,type:"default",icon:(0,s.jsx)(h.Z,{}),children:(0,s.jsx)(l(),{href:"https://supabase.com/docs/guides/auth/concepts/redirect-urls",target:"_blank",rel:"noreferrer",children:"Documentation"})}),(0,s.jsxs)(n.fC,{delayDuration:0,children:[(0,s.jsx)(n.xz,{asChild:!0,children:(0,s.jsx)(u.z,{disabled:!T,onClick:()=>E(!0),children:"Add URL"})}),!T&&(0,s.jsx)(n.h_,{children:(0,s.jsxs)(n.VY,{side:"bottom",children:[(0,s.jsx)(n.Eh,{className:"radix-tooltip-arrow"}),(0,s.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,s.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to update redirect URLs"})})]})})]})]})]}),o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z,{children:(0,s.jsx)(b.p,{})}),(0,s.jsx)(z,{children:(0,s.jsx)(b.p,{})})]}),R&&(0,s.jsxs)(x.bZ,{variant:"destructive",children:[(0,s.jsx)(m.Z,{strokeWidth:2}),(0,s.jsx)(x.Cd,{children:"Failed to retrieve auth configuration"}),(0,s.jsx)(x.X,{children:r.message})]}),_&&(0,s.jsx)(k,{URI_ALLOW_LIST_ARRAY:Z,canUpdate:T,onSelectUrlToDelete:C}),(0,s.jsx)(f.C,{hideFooter:!0,size:"small",visible:A,onCancel:()=>E(!A),header:(0,s.jsx)("h3",{className:"text-sm",children:"Add a new URL"}),children:(0,s.jsx)(p.Z,{validateOnBlur:!0,id:"new-redirect-url-form",initialValues:{url:""},validationSchema:I,onSubmit:P,children:()=>(0,s.jsxs)("div",{className:"mb-4 space-y-4 pt-4",children:[(0,s.jsx)("div",{className:"px-5",children:(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"This will add a URL to a list of allowed URLs that can interact with your Authentication services for this project."})}),(0,s.jsx)("div",{className:"border-overlay-border border-t"}),(0,s.jsx)("div",{className:"px-5",children:(0,s.jsx)(j.Z,{id:"url",name:"url",label:"URL",placeholder:"https://mydomain.com"})}),(0,s.jsx)("div",{className:"border-overlay-border border-t"}),(0,s.jsx)("div",{className:"px-5",children:(0,s.jsx)(u.z,{block:!0,form:"new-redirect-url-form",htmlType:"submit",size:"medium",disabled:S,loading:S,children:"Add URL"})})]})})}),(0,s.jsx)(f.C,{hideFooter:!0,size:"small",visible:void 0!==O,header:(0,s.jsx)("h3",{className:"text-sm",children:"Remove URL"}),onCancel:()=>C(void 0),children:(0,s.jsxs)("div",{className:"mb-4 space-y-4 pt-4",children:[(0,s.jsxs)("div",{className:"px-5",children:[(0,s.jsxs)("p",{className:"mb-2 text-sm text-foreground-light",children:["Are you sure you want to remove"," ",(0,s.jsx)("span",{className:"text-foreground",children:O}),"?"]}),(0,s.jsx)("p",{className:"text-foreground-light text-sm",children:"This URL will no longer work with your authentication configuration."})]}),(0,s.jsx)("div",{className:"border-overlay-border border-t"}),(0,s.jsxs)("div",{className:"flex gap-3 px-5",children:[(0,s.jsx)(u.z,{block:!0,type:"default",size:"medium",onClick:()=>C(void 0),children:"Cancel"}),(0,s.jsx)(u.z,{block:!0,size:"medium",type:"warning",loading:S,onClick:()=>W(O),children:S?"Removing...":"Remove URL"})]})]})})]})};let E=(0,g.object)({SITE_URL:(0,g.string)().required("Must have a Site URL")});var O=()=>{let{ref:e}=(0,a.UO)(),{data:t,error:r,isLoading:n,isError:o,isSuccess:l}=(0,w.$E)({projectRef:e}),{mutate:u,isLoading:h}=(0,y._)(),f="auth-config-general-form",g=(0,L.Xo)(i.KA.UPDATE,"custom_config_gotrue"),b={SITE_URL:null==t?void 0:t.SITE_URL};return o?(0,s.jsxs)(x.bZ,{variant:"destructive",children:[(0,s.jsx)(m.Z,{strokeWidth:2}),(0,s.jsx)(x.Cd,{children:"Failed to retrieve auth configuration"}),(0,s.jsx)(x.X,{children:r.message})]}):(0,s.jsx)(p.Z,{id:f,initialValues:b,onSubmit:(t,r)=>{let{resetForm:s}=r;u({projectRef:e,config:{...t}},{onError:()=>{d.ZP.error("Failed to update settings")},onSuccess:()=>{d.ZP.success("Successfully updated settings"),s({values:t,initialValues:t})}})},validationSchema:E,children:e=>{let{handleReset:t,resetForm:r,values:i,initialValues:a}=e,o=JSON.stringify(i)!==JSON.stringify(a);return(0,c.useEffect)(()=>{l&&r({values:b,initialValues:b})},[l]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.ph,{title:"Site URL",description:"Configure the default redirect URL used when a redirect URL is not specified or doesn't match one from the allow list. This value is also exposed as a template variable in the email templates section. Wildcards cannot be used here."}),(0,s.jsx)(v.by,{disabled:!0,footer:(0,s.jsx)("div",{className:"flex py-4 px-8",children:(0,s.jsx)(v.iN,{form:f,isSubmitting:h,hasChanges:o,handleReset:t,disabled:!g,helper:g?void 0:"You need additional permissions to update authentication settings"})}),children:(0,s.jsx)(v.hj,{children:(0,s.jsx)(v.B4,{loading:n,children:(0,s.jsx)(j.Z,{id:"SITE_URL",size:"small",label:"Site URL",disabled:!g})})})})]})}})},C=r(92099),T=r(14782);let I=()=>{let e=(0,L.Xo)(i.KA.READ,"custom_config_gotrue");return(0,L.N4)()&&!e?(0,s.jsx)(T.Z,{isFullPage:!0,resourceText:"access your project's email settings"}):(0,s.jsxs)(v.ld,{children:[(0,s.jsx)(O,{}),(0,s.jsx)(A,{})]})};I.getLayout=e=>(0,s.jsx)(C.g1,{children:e});var P=I},15434:function(e,t,r){"use strict";var s=r(52322);r(2784);var i=r(11157),n=r(2515);t.Z=function(e){return(0,s.jsx)(n.Z,{icon:i.Z,...e})}},11157:function(e,t,r){"use strict";var s=r(2784),i=r(13980),n=r.n(i);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}var o=(0,s.forwardRef)(function(e,t){var r=e.color,i=e.size,n=void 0===i?24:i,o=function(e,t){if(null==e)return{};var r,s,i=function(e,t){if(null==e)return{};var r,s,i={},n=Object.keys(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["color","size"]);return s.createElement("svg",a({ref:t,xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:void 0===r?"currentColor":r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),s.createElement("circle",{cx:"12",cy:"12",r:"10"}),s.createElement("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),s.createElement("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}))});o.propTypes={color:n().string,size:n().oneOfType([n().string,n().number])},o.displayName="Globe",t.Z=o}},function(e){e.O(0,[667,9678,8183,8421,3844,9785,7263,2745,9595,4582,5573,7932,9806,1682,8601,7309,9229,3832,626,7774,6541,8020,6723,9774,2888,179],function(){return e(e.s=71372)}),_N_E=e.O()}]);